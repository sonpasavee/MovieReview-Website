<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin • Search</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gradient-to-b from-[#101010] via-[#0c0c0c] to-black text-zinc-100">

  <!-- แถบหัวแบบเรียบ ไม่มีปุ่ม -->
  <header class="w-full bg-black/80 border-b border-zinc-800/60">
    <div class="max-w-7xl mx-auto px-4 py-3">
      <div class="text-xl font-semibold tracking-wider">R-MOVIE • Admin</div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 py-6 space-y-6">

    <!-- ช่องค้นหาใหญ่ -->
    <section>
      <form action="/admin/search" method="GET" class="relative">
        <span class="absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none">
          <!-- ไอคอนแว่น -->
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-zinc-400" viewBox="0 0 24 24" fill="currentColor">
            <path d="M21.53 20.47l-3.66-3.66A8 8 0 1016 18l3.66 3.66a.75.75 0 101.06-1.06zM10 17.5A7.5 7.5 0 1117.5 10 7.51 7.51 0 0110 17.5z"/>
          </svg>
        </span>
        <input
          type="text"
          name="q"
          value="<%= typeof query !== 'undefined' ? query : '' %>"
          placeholder="ค้นหาหนัง..."
          class="w-full pl-12 pr-4 py-3 rounded-2xl bg-zinc-900/80 border border-zinc-800 outline-none
                 focus:ring-2 focus:ring-zinc-500/50"
          autofocus
        />
      </form>
    </section>

    <!-- แถบหัวผลลัพธ์ -->
    <section class="flex items-center gap-4">
      <h2 class="text-lg font-semibold">ผลการค้นหา</h2>
      <span class="text-sm text-zinc-400">( <%= (results && results.length) ? results.length : 0 %> รายการ )</span>
    </section>

    <!-- ผลลัพธ์ -->
    <% if (hasQuery && results && results.length) { %>
      <section class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-6">
        <% results.forEach(m => { %>
          <div class="group">
            <a href="/admin/movie/<%= m.movieId %>/detail"
               class="block overflow-hidden rounded-xl border border-zinc-800 bg-black">
              <img src="<%= m.poster_path %>" alt="<%= m.title %>"
                   class="w-full h-56 object-cover group-hover:opacity-90 transition"/>
            </a>
            <div class="mt-2 text-sm text-zinc-200 line-clamp-1" title="<%= m.title %>"><%= m.title %></div>
          </div>
        <% }) %>
      </section>

    <% } else if (hasQuery && (!results || !results.length)) { %>
      <!-- ไม่มีผลลัพธ์ (แสดงเมื่อมีการค้นหาแล้วเท่านั้น) -->
      <section class="rounded-2xl border border-zinc-800 bg-zinc-900/40 h-40 grid place-items-center">
        <div class="text-center">
          <div class="text-zinc-300">ไม่พบผลลัพธ์สำหรับ “<%= query %>”</div>
          <div class="text-xs text-zinc-500 mt-1">ลองใช้คำค้นหาที่ต่างออกไป หรือค้นหาภาษาอังกฤษ/ไทย</div>
        </div>
      </section>

    <% } else { %>
      <!-- ยังไม่พิมพ์ค้นหา: ไม่แสดงกล่องว่าง -->
      <section class="text-sm text-zinc-500">พิมพ์คำค้นในช่องด้านบนเพื่อเริ่มค้นหา</section>
    <% } %>

  </main>
</body>
</html>
