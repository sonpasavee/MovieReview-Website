<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin • Search</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white min-h-screen flex flex-col">

  <!-- Header + Search -->
  <header class="sticky top-0 z-30">
    <div class="w-full bg-gradient-to-r from-blue-700/80 via-indigo-700/80 to-purple-700/80">
      <div class="max-w-7xl mx-auto px-4 py-3 flex items-center gap-3">
        <div class="text-sm sm:text-base font-semibold tracking-wide">Admin Search</div>
        <form action="/admin/search" method="GET" class="flex-1">
          <input
            type="text"
            name="q"
            value="<%= typeof query !== 'undefined' ? query : '' %>"
            placeholder="ค้นหาหนัง…"
            class="w-full px-4 py-2 rounded-full bg-black/40 placeholder:zinc-300
                   ring-1 ring-white/30 outline-none focus:ring-2 focus:ring-white/60"
            autofocus
          />
        </form>
      </div>
    </div>
  </header>

  <main class="flex-1 max-w-7xl mx-auto px-4 py-6">
    <% if (hasQuery && results && results.length) { %>
      <!-- มีคำค้นและมีผลลัพธ์ -->
      <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-6">
        <% results.forEach(m => { %>
          <div class="group">
            <a href="/admin/movie/<%= m.movieId %>/reviews"
               class="block rounded-xl overflow-hidden ring-1 ring-zinc-700 bg-black" title="<%= m.title %>">
              <img src="<%= m.poster_path %>" alt="<%= m.title %>"
                   class="w-full h-48 object-cover group-hover:opacity-90 transition" />
            </a>
            <div class="mt-2 text-sm text-zinc-200 line-clamp-1"><%= m.title %></div>
          </div>
        <% }) %>
      </div>

    <% } else if (hasQuery && (!results || !results.length)) { %>
      <!-- มีคำค้นแล้ว แต่ไม่มีผลลัพธ์ -->
      <div class="h-48 grid place-items-center rounded-xl ring-1 ring-zinc-700 bg-zinc-900/50">
        <p class="text-zinc-300">ไม่พบผลลัพธ์</p>
      </div>

    <% } else { %>
      <!-- ยังไม่ได้ค้นหา: ไม่แสดงกล่อง "ไม่พบผลลัพธ์" -->
      <!--<div class="text-zinc-400 text-sm">
        พิมพ์คำค้นในช่องด้านบนเพื่อเริ่มค้นหาหนัง
      </div>-->
    <% } %>
  </main>

  <%- include('partials/footer') %>
</body>
</html>
