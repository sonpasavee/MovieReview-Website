<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>User Dashboard</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet"/>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Alpine.js -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <!-- Preline (for hs-accordion / hs-overlay) -->
  <script defer src="https://cdn.jsdelivr.net/npm/preline@2.4.1/dist/preline.min.js"></script>
</head>

<body class="font-[Kanit,Roboto,sans-serif] bg-gray-50 dark:bg-neutral-900">

  <!-- ========== TOP BAR ========== -->
  <div class="sticky top-0 inset-x-0 z-20 bg-white border-y border-gray-200 px-4 sm:px-6 lg:px-8 lg:hidden dark:bg-neutral-800 dark:border-neutral-700">
    <div class="flex items-center justify-between py-2">
      <!-- Toggle -->
      <button type="button"
        class="size-8 flex justify-center items-center gap-x-2 border border-gray-200 text-gray-800 hover:text-gray-500 rounded-lg dark:border-neutral-700 dark:text-neutral-200 dark:hover:text-neutral-500"
        aria-haspopup="dialog" aria-expanded="false" aria-controls="hs-application-sidebar"
        data-hs-overlay="#hs-application-sidebar">
        <span class="sr-only">Toggle Navigation</span>
        <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M15 3v18"/><path d="m8 9 3 3-3 3"/></svg>
      </button>

      <!-- Breadcrumb -->
      <ol class="ms-3 flex items-center whitespace-nowrap">
        <li class="flex items-center text-sm text-gray-800 dark:text-neutral-400">
          Application Layout
          <svg class="shrink-0 mx-3 size-2.5 text-gray-400 dark:text-neutral-500" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 1L10.7 7.2a.5.5 0 0 1 0 .6L5 14"/></svg>
        </li>
        <li class="text-sm font-semibold text-gray-800 truncate dark:text-neutral-200">Dashboard</li>
      </ol>

      <!-- Mini user -->
      <div class="text-sm text-gray-600 dark:text-neutral-300">
        ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, <span class="font-semibold"><%= user?.name || '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ' %></span>
      </div>
    </div>
  </div>
  <!-- ========== END TOP BAR ========== -->

  <!-- ========== SIDEBAR ========== -->
  <aside id="hs-application-sidebar"
    class="hs-overlay [--auto-close:lg] hs-overlay-open:translate-x-0 -translate-x-full transition-all duration-300 transform w-72 h-full hidden fixed inset-y-0 start-0 z-60 bg-white border-e border-gray-200 lg:block lg:translate-x-0 dark:bg-neutral-800 dark:border-neutral-700"
    role="dialog" tabindex="-1" aria-label="Sidebar">

    <div class="relative flex flex-col h-full max-h-full">
      <!-- Logo / Profile -->
      <div class="px-6 pt-4 pb-4">
        <div class="flex items-center justify-between mb-3">
          <a href="/" class="text-xl font-semibold text-blue-600 dark:text-white">MovieReview</a>
          <span class="hidden lg:inline text-xs text-gray-500 dark:text-neutral-400">v1.0</span>
        </div>

            <!-- User profile box -->
        <div class="flex flex-col items-center p-6">
        <div class="relative mb-3">
            <img src="<%= user?.avatar || '/img/avatar-default.png' %>" 
            alt="avatar"
            class="size-24 rounded-full object-cover ring-2 ring-white/70 dark:ring-neutral-700"
            onerror="this.onerror=null;this.src='/img/avatar-default.png';" />
            <span class="absolute bottom-2 right-2 block size-3 rounded-full bg-emerald-500 ring-2 ring-white dark:ring-neutral-800"></span>
        </div>
        <div class="text-center">
            <p class="font-semibold text-gray-900 dark:text-neutral-100"><%= user?.name || '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ' %></p>
            <p class="text-sm text-gray-500 dark:text-neutral-400"><%= user?.email %></p>
        </div>
        </div>


      <!-- Sidebar Menu -->
      <div class="h-full overflow-y-auto [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300 dark:[&::-webkit-scrollbar-track]:bg-neutral-700 dark:[&::-webkit-scrollbar-thumb]:bg-neutral-500">
        <nav class="hs-accordion-group p-3 flex flex-col" data-hs-accordion-always-open>
          <ul class="flex flex-col space-y-1">
            <li>
              <a href="/user/dashboard" class="flex items-center gap-x-3.5 py-2 px-2.5 bg-gray-100 text-sm text-gray-800 rounded-lg dark:bg-neutral-700 dark:text-white">
                <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                Dashboard
              </a>
            </li>

            <!-- Account Menu -->
            <li class="hs-accordion" id="account-accordion">
              <button type="button" class="hs-accordion-toggle w-full text-start flex items-center gap-x-3.5 py-2 px-2.5 text-sm rounded-lg hover:bg-gray-100 dark:bg-neutral-800 dark:text-neutral-200">
                <svg class="shrink-0 mt-0.5 size-4" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2"><circle cx="18" cy="15" r="3"/><circle cx="9" cy="7" r="4"/><path d="M10 15H6a4 4 0 0 0-4 4v2"/></svg>
                Account
              </button>
              <div id="account-accordion-child" class="hs-accordion-content w-full overflow-hidden transition-[height] duration-300 hidden">
                <ul class="ps-8 pt-1 space-y-1">
                  <li><a href="/profile" class="flex items-center gap-x-3.5 py-2 px-2.5 text-sm rounded-lg hover:bg-gray-100 dark:text-neutral-200">Profile</a></li>
                  <li><a href="/settings" class="flex items-center gap-x-3.5 py-2 px-2.5 text-sm rounded-lg hover:bg-gray-100 dark:text-neutral-200">Settings</a></li>
                  <li><a href="/logout" class="flex items-center gap-x-3.5 py-2 px-2.5 text-sm rounded-lg hover:bg-gray-100 dark:text-neutral-200">Logout</a></li>
                </ul>
              </div>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </aside>
  <!-- ========== END SIDEBAR ========== -->

  <!-- ========== MAIN CONTENT ========== -->
  <main class="w-full pt-6 px-4 sm:px-6 md:px-8 lg:ps-80">
    <!-- Flash messages -->
    <% if (messages && Object.keys(messages).length) { %>
      <div class="mb-4">
        <% Object.keys(messages).forEach(function(type){ messages[type].forEach(function(msg){ %>
          <p class="rounded-md px-4 py-2 text-sm <%= type === 'error' ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700' %>">
            <%= msg %>
          </p>
        <% }) }) %>
      </div>
    <% } %>

    <!-- Welcome -->
    <h1 class="text-2xl font-bold text-gray-800 dark:text-neutral-100">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö, <%= user?.name || '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ' %> üëã</h1>
    <p class="mt-2 text-gray-600 dark:text-neutral-300">‡∏≠‡∏µ‡πÄ‡∏°‡∏•: <%= user?.email %></p>

    <!-- Example Cards -->
    <section class="mt-6 grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
      <div class="rounded-2xl bg-white p-6 shadow-sm border border-gray-100 dark:bg-neutral-800 dark:border-neutral-700">
        <h2 class="font-semibold text-gray-800 dark:text-neutral-100 mb-2">‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h2>
        <p class="text-sm text-gray-600 dark:text-neutral-300">‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏£‡∏∏‡∏õ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏µ‡∏ß‡∏¥‡∏ß ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ ‡∏Ø‡∏•‡∏Ø</p>
      </div>
      <div class="rounded-2xl bg-white p-6 shadow-sm border border-gray-100 dark:bg-neutral-800 dark:border-neutral-700">
        <h2 class="font-semibold text-gray-800 dark:text-neutral-100 mb-2">‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h2>
        <p class="text-sm text-gray-600 dark:text-neutral-300">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</p>
      </div>
      <div class="rounded-2xl bg-white p-6 shadow-sm border border-gray-100 dark:bg-neutral-800 dark:border-neutral-700">
        <h2 class="font-semibold text-gray-800 dark:text-neutral-100 mb-2">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</h2>
        <a href="/profile" class="text-sm text-indigo-600 hover:underline">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</a>
      </div>
    </section>
  </main>
  <!-- ========== END MAIN CONTENT ========== -->

</body>
</html>
